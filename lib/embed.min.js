/**
 * @formcrafts/embed
 * Copyright (c) 2024-2024, Nishant Agrawal. (MIT Licensed)
 * https://github.com/formcrafts/embed
 */

/**
 * DO NOT EDIT THIS FILE
 * The code in this file is generated from files in ./src/
 */

(function(r,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(r=typeof globalThis<"u"?globalThis:r||self,c(r.embed={}))})(this,function(r){"use strict";class c{drawerElement;options;constructor(t,n){this.drawerElement=t,this.options=n,t.drawerInstance=this,t.classList.add("fc-modal"),this.bindEvents()}bindEvents(){this.drawerElement.querySelector(".handle")?.addEventListener("touchstart",t=>this.close()),this.drawerElement.addEventListener("click",t=>{t.target===this.drawerElement&&this.close()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.close()})}open(){document.body.style.overflow="hidden",this.options.awaitOpenAnimation&&this.drawerElement.addEventListener("animationend",()=>{this.afterOpen()},{once:!0}),this.drawerElement.setAttribute("aria-hidden","false"),this.drawerElement.classList.add(this.options.openClass||"open"),this.options.awaitOpenAnimation||this.afterOpen()}afterOpen(){this.options.onOpen&&this.options.onOpen()}close(){document.body.style.overflow="",this.drawerElement.setAttribute("aria-hidden","true"),this.options.awaitCloseAnimation&&this.drawerElement.addEventListener("animationend",()=>{this.afterClose()},{once:!0}),this.options.awaitCloseAnimation||this.afterClose()}afterClose(){this.drawerElement.classList.remove(this.options.openClass||"open"),this.options.onClose&&this.options.onClose()}}var h='.fc-modal{display:none;z-index:999;position:fixed;top:0;left:0;right:0;bottom:0;overflow-y:auto;background:rgba(0,2,4,0.6);justify-content:center;align-items:center;padding:10vh 0;overscroll-behavior:none;will-change:background-color;--slide-up-distance:8px;--slide-up-duration:200ms;}.fc-modal.fc-is-open{display:flex;}.fc-modal__container{will-change:transform;position:fixed;}.fc-modal__container{display:flex;width:100%;box-shadow:0 0 12px rgba(0,0,0,0.4);background-color:#fff;max-height:80vh;border-radius:4px;overflow-y:auto;box-sizing:border-box;max-width:90vw;overscroll-behavior:contain;}.fc-modal__container iframe{min-height:200px;overscroll-behavior:contain;}@container (max-width:768px){.fc-modal{padding-bottom:0;align-items:flex-end;--slide-up-distance:30px;--slide-up-duration:300ms;}.fc-modal__container{align-self:flex-end;box-shadow:0 -5px 15px rgba(0,0,0,0.3);border-top-left-radius:0.5rem;border-top-right-radius:0.5rem;border-bottom-left-radius:0px;border-bottom-right-radius:0px;max-width:initial!important;width:100%;max-height:80%;}}@media (max-width:768px){.fc-modal{padding-bottom:0;align-items:flex-end;--slide-up-distance:30px;--slide-up-duration:300ms;}.fc-modal__container{align-self:flex-end;box-shadow:0 -5px 15px rgba(0,0,0,0.3);border-top-left-radius:0.5rem;border-top-right-radius:0.5rem;border-bottom-left-radius:0px;border-bottom-right-radius:0px;max-width:initial!important;width:100%;max-height:80%;}}.modal__close{background:0 0;border:0;}.modal__header .modal__close:before{content:"\\2715";}.modal__content{margin:2rem 0;line-height:1.5;color:rgba(0,0,0,0.8);}.fc-modal[aria-hidden="false"],.fc-modal[aria-hidden="true"]{animation-duration:var(--slide-up-duration);animation-timing-function:cubic-bezier(0,0,0.2,1);}.fc-modal[aria-hidden="false"] .fc-modal__container,.fc-modal[aria-hidden="true"] .fc-modal__container{animation-duration:var(--slide-up-duration);animation-timing-function:cubic-bezier(0,0,0,1);}@keyframes fcFadeIn{from{background:rgba(0,2,4,0);}to{background:rgba(0,2,4,0.6);}}@keyframes fcFadeOut{from{background:rgba(0,2,4,0.6);}to{background:rgba(0,2,4,0);}}@keyframes fcSlideUp{from{opacity:0;transform:translateY(var(--slide-up-distance));}to{opacity:1;transform:translateY(0);}}@keyframes fcSlideDown{from{opacity:1;transform:translateY(0);}to{opacity:0;transform:translateY(var(--slide-up-distance));}}.fc-modal[aria-hidden="false"]{animation-name:fcFadeIn;}.fc-modal[aria-hidden="true"]{animation-name:fcFadeOut;}.fc-modal[aria-hidden="false"] .fc-modal__container{animation-name:fcSlideUp;}.fc-modal[aria-hidden="true"] .fc-modal__container{animation-name:fcSlideDown;}';function g(e){const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length===2)return n.pop().split(";").shift()}const y=typeof window<"u"&&window.location&&window.location.search.includes("debug=true"),b=["https://app.formcrafts.com","https://app.beta-formcrafts.com","https://app.localhost:5173"],w="rgba(0, 5, 10, 0.08) 0px 0px 0px 0.5px, rgba(50, 55, 60, 0.04) 2px 3px 2px 0px, rgba(50, 50, 50, 0.03) -2px -2px 2px 0px, rgba(80, 80, 80, 0.176) 0px 7px 5px -7px";function x(e){const t=e.formBase??"https://app.formcrafts.com",n=new URL(`${t}/${e.form}`);return n.searchParams.set("iframe","true"),typeof e.seamless<"u"&&e.seamless===!0&&n.searchParams.set("seamless","true"),typeof e._params<"u"&&e._params.forEach((s,a)=>{n.searchParams.set(a,s)}),n.href}function v(e){const t=e.formBase??"https://app.formcrafts.com",n=new URL(`${t}/${e.form}`);return n.searchParams.set("iframe","true"),typeof e._params<"u"&&e._params.forEach((s,a)=>{n.searchParams.set(a,s)}),n.href}function f(e,t){const n=(a,i)=>{for(const o of a)if(o.isIntersecting){t(),i.disconnect();return}},s=new IntersectionObserver(n);Array.isArray(e)?e.forEach(a=>s.observe(a)):s.observe(e)}function _(e,t,n){typeof t>"u"||(n&&(n.style.height=""),e.style.height=`${t}px`,e.style.visibility="visible",e.style.position="static")}function m(e,t,n){const s=("seamless"in t&&t?.seamless)??!1;window.addEventListener("message",a=>{if(e.contentWindow===a.source){if(!b.includes(a.origin))return!1;if(y&&console.debug("Received message",a.data),a.data.type==="ga_event"&&typeof window.gtag<"u"){const i=a.data.content;window.gtag("event",i.type,i.attributes)}if(a.data.type==="gtm_event"&&typeof window.dataLayer<"u"){const i=a.data.content;window.dataLayer.push({event:i.type,...i.attributes})}if(a.data.type==="load"){const i=g("hubspotutk");i&&e.contentWindow.postMessage({type:"hubspotutk",content:i},"*"),e.contentWindow.postMessage({type:"url",content:window.location.href},"*");let o=t.values??{};e.contentWindow.postMessage({type:"values",content:o},"*");const l=e._formcraftsEvents;l.load&&l.load.forEach(d=>d())}if(a.data.type==="page"){const i=e.getBoundingClientRect();i.top>=0&&i.top<=window.innerHeight||window.scrollBy({top:i.top-parseFloat(getComputedStyle(document.documentElement).fontSize)*2,behavior:"smooth"})}if(a.data.type==="height"){const i="target"in t?t.target:null;_(e,a.data.content,i)}if(a.data.type==="background"&&!s&&(e.style.background=a.data.content),a.data.type==="name"&&(e.ariaLabel=a.data.content,e.title=a.data.content),a.data.type==="success"&&n==="embed"){const i=e.getBoundingClientRect();i.top>=0&&i.top<=window.innerHeight||window.scrollBy({top:i.top-parseFloat(getComputedStyle(document.documentElement).fontSize)*1,behavior:"smooth"})}if(a.data.type==="close"&&n==="popup"&&t){const i=`fc-modal-${t.form}`;document.getElementById(i).drawerInstance.close()}}})}function E(e){if(e.target.querySelector("iframe")){const s=e.target.querySelector("iframe");return p(s)}typeof e.seamless>"u"&&(e.seamless=!1);const t=document.createElement("iframe");m(t,e,"embed");const n=window.getComputedStyle(e.target);return e.target.style.display="flex",e.target.style.justifyContent="stretch",e.target.style.width="100%",t.dataset.src=x(e),t.title="Formcrafts form",t.style.border="none",t.style.width=n.getPropertyValue("width"),t.style.position="absolute",t.style.visibility="hidden",t.ariaLabel="Formcrafts form",t.name="formcrafts-iframe",t.onload=()=>{e.target.style.overflow="initial",t.style.width=`${e.width}px`,t.style.maxWidth="100%",t.style.transition="height 0ms linear",t.style.willChange="height"},typeof e.width<"u"&&e.width!==null&&(t.style.width=`${e.width}px`,t.style.maxWidth="100%"),e.seamless||(t.style.boxShadow=w,t.style.borderRadius="4px"),f(t,()=>{typeof t.dataset.src<"u"&&(t.src=t.dataset.src,t.removeAttribute("data-src"))}),e.target.appendChild(t),p(t)}function p(e,t){const n={on(s,a){const i=e._formcraftsEvents;i[s]=i[s]||[],i[s].push(a)},values(s){e.contentWindow?.postMessage({type:"values",content:s},"*")},destroy(){e?.remove()}};return e._formcraftsInstance=n,e._formcraftsEvents={},n}function u(e,t){const n=e.drawerElement.querySelector("iframe"),s={on(a,i){const o=n._formcraftsEvents;o[a]=o[a]||[],o[a].push(i)},load(){n&&n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"))},values(a){n.contentWindow?.postMessage({type:"values",content:a},"*")},open(){n&&n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src")),e.open()},close(){e.close()},destroy(){e.drawerElement.remove()}};return n._formcraftsInstance=s,n._formcraftsEvents={},s}function C(e){const t={openClass:"fc-is-open",awaitOpenAnimation:!0,awaitCloseAnimation:!0},n=typeof e.width>"u"?500:e.width,s=`fc-modal-${e.form}`;if(document.getElementById(s)){const k=document.getElementById(s).drawerInstance;return u(k)}if(!document.getElementById("fc-modal-css")){const d=document.createElement("style");d.id="fc-modal-css",d.appendChild(document.createTextNode(h)),document.head.appendChild(d)}const a=document.createElement("div");a.id=s,a.classList.add("fc-modal"),a.ariaHidden="true";const i=document.createElement("div");i.style.maxWidth=`min(90vw,${n}px)`,i.style.visibility="hidden",i.role="dialog",i.setAttribute("aria-modal","true"),i.classList.add("fc-modal__container");const o=document.createElement("iframe");m(o,e,"popup"),o.dataset.src=v(e),o.title="Formcrafts popup form",o.style.border="none",o.style.width="100%",o.ariaLabel="Formcrafts popup form",o.name="formcrafts-popup-iframe",o.style.willChange="height",o.style.position="static",o.style.transition="height 0ms linear",o.style.willChange="height",o.onload=()=>{i.style.visibility="visible"},a.appendChild(i),i.appendChild(o),e.appendTo?e.appendTo.appendChild(a):document.body.appendChild(a);const l=new c(a,t);return u(l)}r.createInlineForm=E,r.createPopup=C,r.observeVisibility=f});
//# sourceMappingURL=embed.min.js.map
